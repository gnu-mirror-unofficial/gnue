<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Units Module</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="GNU Enterprise - Base Package Proposal"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="		Language Module
	"
HREF="language.html"><LINK
REL="NEXT"
TITLE="Currency Module"
HREF="currency.html"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GNU Enterprise - Base Package Proposal</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="language.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="currency.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="UNITS">Chapter 8. Units Module</H1
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN385">8.1. Requirements</H1
><P
>			This chapter is $Revision: 1.1 $ $Date: 2003/01/05 00:00:29 $. 
		</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN388">8.1.1. Business Requirements</H2
><P
></P
><OL
TYPE="1"
><LI
><P
>						Maintain Unit Information. 
					</P
></LI
><LI
><P
>						Do simple conversions. 
					</P
></LI
></OL
><P
>				<PRE
CLASS="PROGRAMLISTING"
>&#13;The class "unit::conversion_unit" could contain the following instances:
  1.  1 package
  2.  12 bottles
  3.  1 bottle
  4.  0.7 liters
  5.  1.4 pounds
  
... and the class "unit::conversion" would contain two instances:
  a.  list of 1+2
  b.  list of 3+4+5

... which would mean that:
  1 package = 12 bottles (for the first case a)
  
      and
      
  1 bottle = 0.7 liters = 1.4 pounds (for the second case b)

				</PRE
>
				</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN397">8.1.2. Future Requirements</H2
><P
>				The following items will be implemented in future version of this module. They may be implemented in the base module or be added via an industry specific add on. 
			</P
><P
></P
><OL
TYPE="1"
><LI
><P
>						None 
					</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN403">8.1.3. Business Objects</H2
><P
>				The following Business Objects are defined and maintained by this module. 
			</P
><P
></P
><OL
TYPE="1"
><LI
><P
>						unit::unit - Define the available units of measure. 
					</P
></LI
><LI
><P
>						unit::quanitity - Define a robust quanitity (not currency)
					</P
></LI
><LI
><P
>						unit::conversion -  Each class object maintains a list of equal units.
					</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN413">8.1.4. Forms</H2
><P
></P
><UL
><LI
STYLE="list-style-type: disc"
><P
>						Maintain Units - Add, Update, and Delete. 
					</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN418">8.1.5. Reports</H2
><P
></P
><OL
TYPE="1"
><LI
><P
>						Unit Report - Print summary of all unit information. 
					</P
></LI
><LI
><P
>						Conversion Report - Print summary of all conversions defined. 
					</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN425">8.1.6. Business Rules</H2
><P
></P
><OL
TYPE="1"
><LI
><P
>						unit::conversion.convert() searches through all of the unit::conversion objects to find the first one that defines both the source units and the result units and then returns the converted amount.
					</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN430">8.1.7. Business Object Definition</H2
><P
>				<PRE
CLASS="PROGRAMLISTING"
>					
# $RCSfile: units.html,v $ - quantities and units of measure
#                  
# Copyright (C) 2001 Free Software Foundation, Inc.
#
# This file is part of GNU Enterprise.
#
# GNU Enterprise is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.
# 
# GNU Enterprise is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with GNU Enterprise; see the file COPYING.  If not, write to the
# Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
# 02111-1307 USA.
#
# This file originally written by Neil Tiffin (neilt@gnue.org).
#
# $Revision: 1.1 $ $Date: 2003/01/05 00:00:29 $ $Author: psu_gnue $
#

module unit
{
  # -------------------------------------------------------------------------
  # unit - unit of measure
  # -------------------------------------------------------------------------
  class unit
  {                       # keeps track of the different units
    char   code&#60;8&#62;;       #   of measure
    char   descr&#60;35&#62;;      # used in GNUe.
    int16  decimals = 0;  # default decimals for this unit
    
  };
  
  # -------------------------------------------------------------------------
  # quantity - 
  # -------------------------------------------------------------------------
  type quantity
  {                            # this definition allows us to abstract
                               # quantities as needed
                               # for example if value = 456192
    int64       value = 0;     # only integer quantities
    int16       decimals = 2;  # and decimals = 3
                               # then value is really 456.192
    unit::unit  *unit;         # pointer to unit
                               #   for example "kg"
                                 
    float get_float();           # 
    text  get_text();            # for example "456.192 kg"
    void  set_float(float val);  #
  };    

  # -------------------------------------------------------------------------
  # conversion_unit - Storage for all of the conversion factors.  Only used
  # by unit::conversion.  Should never be used directly.
  # -------------------------------------------------------------------------
  class conversion_unit
  {
    unit::quantity  amount;
  };
  
  # -------------------------------------------------------------------------
  # conversion - convert between different units.
  # -------------------------------------------------------------------------
  class conversion
  { 
    unit::conversion_unit  [] units;
    
              # returns t or f if can or cannot do conversion
    char can_convert( text source_unit, text result_unit );
              # returns resulting amount
    text convert( text source_unit, text source_amount, text result_unit);
  };
};
 
				</PRE
>
			</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN434">8.1.8. Default Data</H2
><P
>				<PRE
CLASS="PROGRAMLISTING"
>					
--
-- This is a special file format that is converted by the
-- GEAS sql loader into valid sql
--
-- $Id: units.html,v 1.1 2003/01/05 00:00:29 psu_gnue Exp $
--

INSERT INTO "unit__unit" (GEAS-SYS, code, "descr", decimals) VALUES
  (GEAS-SYS,'lbs',  'pounds', 3);
  (GEAS-SYS,'kg',   'kilogram', 3);
  (GEAS-SYS,'each', 'each', 0);
  (GEAS-SYS,'case', 'case', 0);
  (GEAS-SYS,'l',    'liter', 4);


 
				</PRE
>
			</P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="language.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="currency.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Language Module</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Currency Module</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>